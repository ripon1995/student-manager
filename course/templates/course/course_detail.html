{% extends 'course/base_course.html' %}

{% block content %}
    <style>
        .card {
            width: 100% !important;
            height: 300px !important;
            background: #fff;
            border: 2px solid #ccc;
            border-radius: 20px;
            padding: 30px;
            text-align: left;
        }

        .card:hover {
            background: #fff;
        }
    </style>

    <div class="card shadow mb-4" style="width: 100%; height: 300px; background-color: whitesmoke">
        <div class="card-body d-flex flex-column justify-content-between h-100">
            <div>
                <h4 style="text-align: center" class="card-title">{{ course.title }}</h4>
                <p style="text-align: center" class="card-text">
                    {{ course.description|default:"No description provided." }}
                </p>
                <div class="d-flex justify-content-between align-items-center">
                    <h6 class="card-subtitle mb-2 text-muted">
                        Start From: {{ course.created_at|date:"F j, Y" }}
                    </h6>
                    <h6 class="card-subtitle mb-2 text-muted">
                        Course fee: {{ course.course_fee }}
                    </h6>
                </div>

                <div class="d-flex justify-content-between align-items-center">
                    <h6 class="card-subtitle mb-2 text-muted">
                        Capacity: {{ course.capacity }}
                    </h6>
                    <h6 class="card-subtitle mb-2 text-muted">
                        Current student: {{ course.students.count }}
                    </h6>
                </div>

                <div class="d-flex justify-content-between align-items-center">
                    <h6 class="card-subtitle mb-2 text-muted">
                        Days: {{ course.days }}
                    </h6>
                    <h6 class="card-subtitle mb-2 text-muted">
                        Time: {{ course.time }}
                    </h6>
                </div>

                <p style="text-align: center"> {{ course.course_quote }} </p>
                <div class="d-flex justify-content-between align-items-center">
                    <h6 class="card-subtitle mb-2 text-muted">
                        <a href="#">Attendance</a>
                    </h6>
                    <h6 class="card-subtitle mb-2 text-muted">
                        <a href="#" id="show-student-list">Student List</a>
                    </h6>
                </div>
            </div>

        </div>
    </div>

    <div id="student-list" class="mt-3" style="display: none;">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Student List</h5>
                <ul class="list-group">
                    <li class="list-group-item d-flex justify-content-between align-items-center"
                        style="background-color: #204d74; color: white; font-weight: bold;">
                        <span>Name</span>
                        <span>Start From</span>
                    </li>
                    {% for student in course.students.all %}
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            style="background-color: #2e6da4;">
                            <span style="color: white">{{ student.first_name }} {{ student.last_name }}</span>
                            <span style="color: white">{{ student.start_date }}</span>
                        </li>
                    {% empty %}
                        <li class="list-group-item">No students enrolled.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const link = document.getElementById('show-student-list');
            const listDiv = document.getElementById('student-list');
            if (link) {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    listDiv.style.display = listDiv.style.display === 'none' ? 'block' : 'none';
                });
            }
        });
    </script>
{% endblock %}